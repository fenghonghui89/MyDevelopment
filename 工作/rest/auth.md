Tpages SNS REST 帐号服务接口
===============================================================================

提供能用帐号服务，例如登录、退出、注册、及重置密码功能。

目前，该组接口为临时功能，其目的为：

1. 用最短时间，制作出可以满足第一期SNS应用运作所需的功能；
2. 与tpages.cn现有用户数据库对接；
3. 为日后完整系统作铺垫。

严格来说，该组接口并非RESTful。这里同时使用了HTML及JSON两种交互方式，并且直接使用了Laravel的会话。

受此影响，第一期SNS的所有REST接口都基于Laravel会话进行操作。这些都会在后续的版本中逐步被基于OAuth2的验证机制所取代。



用户登录接口: `/auth/signin`
-------------------------------------------------------------------------------

该接口提供用户登录功能，允许用户使用多种不同的信息组合进行登录。


#### 提交登录请求
```
POST /auth/signin
```

##### 前置条件
用户尚未登录

##### 接收参数
`Content-Type: application/x-www-form-urlencoded`

- ***用用户名登录***
    - username: 字符串, 必须传；
    - password: 字符串, 必须传；
    - remember: 布尔值, 可不传；“记住我”，使用用户下次访问时可以自动登录；默认`false`；
    - agree: 布尔值, 必须传；“同意使用协议”；
- ***用邮箱登录***
    - email: 必须传；
    - password: 字符串, 必须传；
    - remember: 布尔值, 可不传；“记住我”，使用用户下次访问时可以自动登录；默认`false`；
    - agree: 布尔值, 必须传；“同意使用协议”；
- ***用昵称登录***
    - name: 必须传；
    - password: 字符串, 必须传；
    - remember: 布尔值, 可不传；“记住我”，使用用户下次访问时可以自动登录；默认`false`；
    - agree: 布尔值, 必须传；“同意使用协议”；
- ***用手机号码登录***
    - mobile: 必须传；
    - password: 字符串, 必须传；
    - remember: 布尔值, 可不传；“记住我”，使用用户下次访问时可以自动登录；默认`false`；
    - agree: 布尔值, 必须传；“同意使用协议”；

##### 返回
- 如果登录成功，则返回：`HTTP 200`，并开启新会话。同时将会话信息通过cookie返回。
- 如果登录失败，则返回：`HTTP 401`，同时返回内容为详细错误内容。
```json
{
  "message": "错误描述"
}
```


#### 用户登录表单HTML页面
```
GET /auth/signin
```

##### 前置条件
用户尚未登录

##### 接收参数
无

##### 返回
该页面仅供内部开发时使用，不得在最终产品中使用该页面。

如果用户进入该页面时已经登录，则会被直接转至开发首页。



退出登录接口: `/auth/signout`
-------------------------------------------------------------------------------

#### 退出登录
```
GET /auth/signout
```

##### 前置条件
用户已经登录

##### 接收参数
无

##### 返回
- 如果成功退出，则返回：`HTTP 200`，结束当前会话，并开启一个新会话。



用户注册接口: `/auth/signup`
-------------------------------------------------------------------------------

#### 注册用户
```
POST /auth/signup
```

##### 前置条件
用户尚未登录

##### 接收参数
`Content-Type: application/x-www-form-urlencoded`

- username: 字符串, 必须传；
- email: 字符串, 必须传；
- name: 字符串, 必须传；用户昵称；
- mobile: 字符串, 必须传；
- password: 字符串, 必须传；
- password_confirmation: 字符串, 必须传；确认密码；
- agree: 布尔值, 必须传；“同意使用协议”；

##### 返回
- 如果注册成功，则返回：`HTTP 200`，同时完成登录过程，将新会话信息通过cookie返回。
- 如果注册失败，则返回：`HTTP 400`，同时返回内容为详细错误内容。
```json
{
  "message": "错误描述"
}
```


重置密码接口: `/auth/pass`
-------------------------------------------------------------------------------

#### 请求重置密码
```
GET /auth/pass
```

##### 前置条件
用户尚未登录

##### 接收参数
无

##### 返回
- 如果成功，则返回：`HTTP 200`，同时返回提示信息。
```json
{
  "captcha": "验证码"
}
```


#### 重置密码
```
POST /auth/pass
```

##### 前置条件
用户尚未登录

##### 接收参数
`Content-Type: application/x-www-form-urlencoded`

- ***用用户名重置密码***
    - username: 字符串, 必须传；
    - captcha: 字符串, 必须传；验证码；
- ***用邮箱重置密码***
    - email: 字符串, 必须传；
    - captcha: 字符串, 必须传；验证码；
- ***用手机号码重置密码***
    - mobile: 字符串, 必须传；
    - captcha: 字符串, 必须传；验证码；

##### 返回
- 如果注册成功，则返回：`HTTP 200`，同时返回提示信息。
```json
{
  "message": "提示信息"
}
```
- 如果失败，则返回：`HTTP 400`，同时返回内容为详细错误内容。
```json
{
  "message": "错误描述"
}
```
